---
interface Props {
	title: string;
	description?: string;
}

const { title, description = "Experience Casco Bay Hotel - Your Maine escape in South Portland." } = Astro.props;
const isHome = Astro.url.pathname.replace(/\/$/, '') === '/business-web-apps';
import '../styles/global.css';
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<meta name="description" content={description} />
		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
	</head>
	<body>
		<header id="main-header" class={isHome ? "" : "scrolled"}>
			<div class="header-container">
				<div class="header-left">
					<nav class="main-nav left-nav">
						<a href="/business-web-apps/rooms">Rooms</a>
						<a href={isHome ? "#amenities" : "/business-web-apps/#amenities"}>Experience</a>
					</nav>
				</div>
				<div class="header-center">
					<a href="/business-web-apps/" class="logo-full">
						<span class="logo-text">Casco Bay Hotel</span>
					</a>
				</div>
				<div class="header-right">
					<nav class="main-nav right-nav">
						<a href={isHome ? "#location" : "/business-web-apps/#location"}>Location</a>
						<div class="header-actions">
							<button id="menu-toggle" class="menu-trigger" aria-label="Toggle Menu">
								<span class="hamburger-line"></span>
								<span class="hamburger-line"></span>
							</button>
							<a href="https://www.choicehotels.com/maine/south-portland/ascend-hotels/me049" class="btn-book">
								Book Now
							</a>
						</div>
					</nav>
				</div>
			</div>
		</header>

		<nav id="full-menu" class="menu-dropdown">
			<div class="menu-dropdown-content">
				<div class="menu-links">
					<a href="/business-web-apps/" class="menu-link">Home</a>
					<a href="/business-web-apps/rooms" class="menu-link">Rooms</a>
					<a href={isHome ? "#amenities" : "/business-web-apps/#amenities"} class="menu-link">Amenities</a>
					<a href={isHome ? "#location" : "/business-web-apps/#location"} class="menu-link">Location</a>
				</div>
				<div class="menu-dropdown-footer">
					<p>(207) 558-4341</p>
				</div>
			</div>
		</nav>

		<main>
			<slot />
		</main>

		<footer>
			<div class="container footer-content">
				<div class="footer-top">
					<div class="footer-brand">
						<h3 class="logo-text" style="color: var(--navy-deep); font-size: 1.5rem; letter-spacing: 0.2rem;">Casco Bay Hotel</h3>
						<p class="address">80 John Roberts Rd, South Portland, ME 04106</p>
						<p class="phone">(207) 558-4341</p>
					</div>
					<nav class="footer-nav">
						<div class="footer-nav-col">
							<h4>Explore</h4>
							<a href="#amenities">The Experience</a>
							<a href="#location">Location</a>
						</div>
						<div class="footer-nav-col">
							<h4>Stay</h4>
							<a href="https://www.choicehotels.com/maine/south-portland/ascend-hotels/me071">Reservations</a>
						</div>
					</nav>
				</div>
				<div class="footer-bottom">
					<p>&copy; {new Date().getFullYear()} Casco Bay Hotel. A South Portland Boutique Escape.</p>
				</div>
			</div>
		</footer>

		<style is:global>
			html {
				scroll-behavior: smooth;
			}
			#main-header {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				padding: 2rem 4rem;
				z-index: 1000;
				transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
			}

			#main-header.scrolled {
				background: transparent;
				padding: 1.5rem 4rem;
			}

			.header-container {
				display: grid;
				grid-template-columns: 1fr auto 1fr;
				align-items: center;
				width: 100%;
				max-width: 1600px;
				margin: 0 auto;
				position: relative;
			}

			/* Logo Styles */
			.logo-text {
				font-family: 'Cinzel', serif;
				font-size: 1.6rem;
				letter-spacing: 0.3rem;
				text-transform: uppercase;
				font-weight: 400;
				color: var(--white);
				transition: all 0.6s ease;
				white-space: nowrap;
			}

			#main-header.scrolled .logo-full {
				opacity: 0;
				visibility: hidden;
				transform: translateY(-10px);
			}

			.header-actions {
				display: flex;
				align-items: center;
				gap: 2rem;
			}

			/* Hamburger Trigger */
			.menu-trigger {
				display: none; /* Hidden by default */
				background: transparent;
				border: none;
				cursor: pointer;
				flex-direction: column;
				gap: 6px;
				width: 25px;
				padding: 0;
				z-index: 1100;
				order: -1; /* Ensure it stays left of the Book Now button */
			}

			#main-header.scrolled .menu-trigger {
				display: flex;
			}

			.hamburger-line {
				display: block;
				width: 100%;
				height: 2px;
				background-color: var(--white);
				transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
			}

			#main-header.scrolled .hamburger-line {
				background-color: var(--accent);
			}

			body.menu-open .hamburger-line:first-child {
				transform: translateY(4px) rotate(45deg);
				background-color: var(--navy-deep) !important;
			}

			body.menu-open .hamburger-line:last-child {
				transform: translateY(-4px) rotate(-45deg);
				background-color: var(--navy-deep) !important;
			}

			/* Menu Dropdown */
			.menu-dropdown {
				position: fixed;
				top: 100px;
				right: 4rem;
				width: 320px;
				background: var(--white);
				z-index: 1050;
				box-shadow: 0 30px 60px rgba(0,0,0,0.15);
				border: 1px solid var(--border-blue);
				padding: 3rem;
				opacity: 0;
				visibility: hidden;
				transform: translateY(-20px);
				transition: all 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
			}

			body.menu-open .menu-dropdown {
				opacity: 1;
				visibility: visible;
				transform: translateY(0);
			}

			.menu-links {
				display: flex;
				flex-direction: column;
				gap: 1.5rem;
				margin-bottom: 3rem;
			}

			.menu-link {
				font-family: 'Cinzel', serif;
				font-size: 1.4rem;
				text-transform: uppercase;
				letter-spacing: 0.2rem;
				color: var(--navy-deep);
				transition: all 0.3s ease;
			}

			.menu-link:hover {
				color: var(--accent);
				padding-left: 10px;
			}

			.menu-dropdown-footer {
				font-size: 0.75rem;
				text-transform: uppercase;
				letter-spacing: 0.1rem;
				color: var(--text-muted);
				border-top: 1px solid var(--border-blue);
				padding-top: 2rem;
			}

			/* Navigation Visibility */
			.main-nav {
				display: flex;
				align-items: center;
				gap: 3rem;
				transition: all 0.4s ease;
			}

			.left-nav { justify-content: flex-start; }
			.right-nav { justify-content: flex-end; }

			#main-header.scrolled .left-nav,
			#main-header.scrolled .right-nav a:not(.btn-book) {
				opacity: 0;
				visibility: hidden;
				pointer-events: none;
			}

			.main-nav a {
				text-transform: uppercase;
				font-size: 0.65rem;
				letter-spacing: 0.2rem;
				font-weight: 700;
				color: var(--white);
				transition: all 0.3s ease;
				white-space: nowrap;
			}

			#main-header.scrolled .main-nav a:hover {
				color: var(--accent);
			}

			.btn-book {
				padding: 0.8rem 2rem;
				border: 1px solid var(--white);
				background: transparent;
				color: var(--white) !important;
				font-weight: 800;
				text-transform: uppercase;
				letter-spacing: 0.15rem;
				font-size: 0.65rem;
				transition: all 0.4s ease;
			}

			#main-header.scrolled .btn-book {
				background: var(--accent);
				border-color: var(--accent);
				box-shadow: 0 10px 25px rgba(37, 99, 235, 0.4);
			}

			.btn-book:hover {
				background: var(--white) !important;
				color: var(--accent) !important;
				border-color: var(--white);
			}

			#main-header.scrolled .btn-book:hover {
				background: #1d4ed8 !important;
				border-color: #1d4ed8;
				transform: translateY(-2px);
			}

			/* Footer */
			footer {
				background-color: var(--cream-muted);
				padding: 5rem 0 5rem;
				color: var(--text-main);
				border-top: 1px solid var(--border-light);
			}

			.footer-top {
				display: flex;
				justify-content: space-between;
			}

			.footer-brand .logo-text {
				color: var(--text-main);
				display: block;
				margin-bottom: 2rem;
			}

			.footer-brand p {
				color: var(--text-muted);
				font-size: 0.9rem;
				margin-bottom: 0.5rem;
			}

			.footer-nav {
				display: flex;
				gap: 5rem;
			}

			.footer-nav-col h4 {
				text-transform: uppercase;
				font-size: 0.7rem;
				letter-spacing: 0.2rem;
				margin-bottom: 2.5rem;
				color: var(--accent);
			}

			.footer-nav-col a {
				display: block;
				margin-bottom: 1.2rem;
				font-size: 0.85rem;
				color: var(--text-main);
				font-weight: 500;
			}

			.footer-nav-col a:hover {
				color: var(--accent);
			}

			.footer-bottom {
				border-top: 1px solid var(--border-light);
				font-size: 0.75rem;
				color: var(--text-muted);
				text-transform: uppercase;
				letter-spacing: 0.1rem;
				text-align: center;
			}

			@media (max-width: 1024px) {
				#main-header { padding: 2rem; }
				#main-header.scrolled { padding: 1rem 2rem; }
				.main-nav { gap: 1.5rem; }
				.footer-top { flex-direction: column; gap: 4rem; }
				.footer-nav { gap: 4rem; flex-wrap: wrap; }
			}

			@media (max-width: 768px) {
				#main-header { 
					padding: 1.5rem 1.5rem; 
				}

				.header-container {
					display: flex;
					justify-content: center;
					align-items: center;
				}

				.header-left {
					display: none;
				}
				
				.header-center {
					display: flex;
					justify-content: center;
				}

				.header-right {
					position: absolute;
					right: 0rem;
					top: 0rem;
					display: none;
				}

				#main-header.scrolled .header-right {
					display: flex;
				}

				.header-right .main-nav a:not(.btn-book) {
					display: none;
				}

				.logo-text { 
					font-size: 1.2rem; 
					letter-spacing: 0.2rem;
				}

				#main-header.scrolled .logo-full {
					display: none;
				}

				.header-actions {
					gap: 1rem;
				}

				.btn-book {
					padding: 0.7rem 1.4rem;
					font-size: 0.6rem;
				}

				.menu-dropdown {
					top: 70px;
					right: 1.5rem;
					width: calc(100% - 3rem);
					padding: 2rem;
				}
			}
		</style>

		<script>
			const header = document.getElementById('main-header');
			const menuToggle = document.getElementById('menu-toggle');
			const menuLinks = document.querySelectorAll('.menu-link');
			const isHome = header && !header.classList.contains('scrolled');
			
			// Scroll Logic
			if (isHome) {
				window.addEventListener('scroll', () => {
					if (window.scrollY > 50) {
						header?.classList.add('scrolled');
					} else {
						header?.classList.remove('scrolled');
					}
				});
			} else {
				header?.classList.add('scrolled');
			}

			// Menu Toggle Logic
			menuToggle?.addEventListener('click', () => {
				document.body.classList.toggle('menu-open');
			});

			// Close menu when link is clicked
			menuLinks.forEach(link => {
				link.addEventListener('click', () => {
					document.body.classList.remove('menu-open');
				});
			});
		</script>
	</body>
</html>
